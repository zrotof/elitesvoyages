<div class="car">

    <div class="hero">
        <div class="hero-content my-container">
            <h1 class="title">LOCATION DE VOITURE</h1>
        </div>
    </div>

    <div class="content my-container">

        <div class="intro">
            <span>Indiquez-nous vos préférences pour les véhicules  et nous reviendrons vers vous rapidement</span>
            <span>Les champs marqués d'un <span class="red-star">*</span> sont obligatoires</span>
        </div>

        <form  [formGroup]="carForm"  (ngSubmit)="onSubmitCarForm()">
            <div class="element">
                <div class="reason">
                    <div class="label">
                        <span>Motif de location </span>
                        <span class="red-star">*</span>
                    </div>
                    <select class="custom-select" formControlName="reason">
                        <option [ngValue]="null" disabled></option>
                        <option *ngFor="let reason of reasons" [ngValue]="reason">{{reason}}</option>
                    </select>
                </div>

                <div *ngIf="isCarFormSubmitted && f.reason.errors" class="error-feedback">
                    <small *ngIf="f.reason.errors.required">Renseignez la raison de location</small>
                  </div>
            </div>

            <div class="town-seats-driver">

                <div class="element">
                    <div class="town">
                            <div class="label">
                                <span>Ville </span>
                                <span class="red-star">*</span>
                            </div>
                            <select formControlName="town">
                                <option [ngValue]="null" disabled></option>
                                <option *ngFor="let town of towns" [ngValue]="town">{{town}}</option>
                            </select>
                    </div>
                    <div *ngIf="isCarFormSubmitted && f.town.errors" class="error-feedback">
                        <small *ngIf="f.town.errors.required">Renseignez la capacité</small>
                      </div>
                </div>

                <div class="element">
                    <div class="seats">
                        <div class="label">
                            <span>Capacités </span>
                            <span class="red-star">*</span>
                        </div>
                        <select formControlName="capacity">
                            <option [ngValue]="null" disabled></option>
                            <option *ngFor="let capacity of capacities" [ngValue]="capacity">{{capacity}}</option>
                        </select>
                    </div>
                    <div *ngIf="isCarFormSubmitted && f.capacity.errors" class="error-feedback">
                        <small *ngIf="f.capacity.errors.required">Renseignez la capacité</small>
                      </div>
                </div>
                
                <div class="element">
                    <div class="driver">
                        <div class="label">
                            <span>Chauffeurs ? </span>
                            <span class="red-star">*</span>
                        </div>
                        <select  formControlName="driver">
                            <option [ngValue]="null" disabled></option>
                            <option *ngFor="let driver of drivers" [ngValue]="driver">{{driver}}</option>
                        </select>
                    </div>

                    <div *ngIf="isCarFormSubmitted && f.driver.errors" class="error-feedback">
                        <small *ngIf="f.driver.errors.required">Renseignez l'option chauffeur</small>
                      </div>
                </div>
            </div>

            <div class="dates">

                <div class="date-start">
                    <div class="element">
                        <div class="day">
                            <div class="label">
                                <span>Début location </span>
                                <span class="red-star">*</span>
                            </div>
                            <p-calendar formControlName="dayStart" dateFormat="mm-dd-yy" inputId="dateformat" [minDate]="minDate" [readonlyInput]="true" placeholder="Jour début" formControlName="dateDeb"></p-calendar>
                        </div>

                        <div *ngIf="isCarFormSubmitted && f.dateDeb.errors" class="error-feedback">
                            <small *ngIf="f.dateDeb.errors.required">Date de début</small>
                          </div>
                    </div>
                    

                    <div class="hour">
                        <div class="label">
                            <span>Heure début</span>
                        </div>
                        <select class="custom-select" formControlName="heureDeb">
                            <option [ngValue]="null" disabled></option>
                            <option *ngFor="let hour of hours" [ngValue]="hour">{{hour}}</option>
                        </select>
                    </div>
                </div>

                <div class="date-end">
                    <div class="element">

                        <div class="day">
                            <div class="label">
                                <span>fin location </span>
                                <span class="red-star">*</span>
                            </div>
                            <p-calendar formControlName="dayEnd" dateFormat="mm-dd-yy" inputId="dateformat" [minDate]="minDate" [readonlyInput]="true" placeholder="Jour fin" formControlName="dateFin"></p-calendar>
                        </div>

                        <div *ngIf="isCarFormSubmitted && f.dateFin.errors" class="error-feedback">
                            <small *ngIf="f.dateFin.errors.required">Date de fin</small>
                          </div>
                    </div>

                    <div class="hour">
                        <div class="label">
                            <span>Heure fin</span>
                        </div>
                        <select formControlName="heureFin">
                            <option [ngValue]="null" disabled></option> 
                            <option *ngFor="let hour of hours" [ngValue]="hour">{{hour}}</option>
                        </select>
                    </div>
                    
                </div>

            </div>

            <div class="extras-bloc">
                <span>Extras</span>

                <div class="extras">
                    <ng-template ngFor let-extra [ngForOf]="extras">
                        <div class="extra">
                            <input type="checkbox" id="{{extra.id}}" (change)="onChangeCarExtras(extra.name, $event)">
                            <label for="{{extra.id}}">{{extra.name}}</label>
                        </div>
                    </ng-template>
                </div>
                

            </div>

            <div class="gender-names">

                <div class="element">
                    <div class="gender">
        
                        <div class="label">
                            <span>Civilités</span>
                            <span class="red-star">*</span>
                        </div>
                        <select class="custom-select" formControlName="civility">
                            <option [ngValue]="null" disabled></option>
                            <option *ngFor="let civility of civilities" [ngValue]="civility">{{civility}}</option>
                        </select>
                        
                    </div>
        
                    <div *ngIf="isCarFormSubmitted && f.civility.errors" class="error-feedback">
                      <small *ngIf="f.civility.errors.required">Renseignez</small>
                    </div>
                </div>
        
                  <div class="element">
                    <div class="lastname">
                      <div class="label">
                          <span>Nom(s) </span>
                          <span class="red-star">*</span>
                      </div>
                      <input type="text" placeholder="Entrez votre nom" formControlName="lastname">
                    </div>
                    <div *ngIf="isCarFormSubmitted && f.lastname.errors" class="error-feedback">
                        <small *ngIf="f.lastname.errors.required">Renseignez votre nom</small>
                    </div>
                  </div>
                 
                  
                <div class="element">
        
                  <div class="firstname">
                      <div class="label">
                          <span>Prénom(s) </span>
                          <span class="red-star">*</span>
                      </div>
                      <input type="text" placeholder="Entrez votre prénom" formControlName="firstname">
                  </div>
                  <div *ngIf="isCarFormSubmitted && f.firstname.errors" class="error-feedback">
                    <small *ngIf="f.firstname.errors.required">Renseignez votre prénom</small>
                  </div>
                </div>
            
            </div>

            <div class="email-phone">
                
                <div class="element">
                    <div class="email">
                        <div class="label">
                            <span>Email </span>
                            <span class="red-star">*</span>
                        </div>
                        <input type="email" placeholder="Email" formControlName="email">
                    </div>

                    <div *ngIf="isCarFormSubmitted && f.email.errors" class="error-feedback">
                        <small *ngIf="f.email.errors.required">Renseignez votre email</small>
                    </div>
                </div>
                

                <div class="element">
                    <div class="phone">
                        <div class="label">
                            <span>Téléphone </span>
                        </div>
                        <input type="text" placeholder="Téléphone" formControlName="phone">
                    </div>
                </div>
            </div>

            <button type="submit">
                <ng-container *ngIf="isCarFormSubmittedAndNotErrorOnClientSide; else defaultText">
                    <p-progressSpinner [style]="{width: '20px', height: '20px'}" strokeWidth="8"></p-progressSpinner>
                </ng-container>
            </button>

        </form>
        <ng-template #defaultText>Réserver</ng-template>


        <div class="procedure">
            <h1>Comment ça marche ?</h1>

            <div class="process-bloc">
                <div class="process">
                    <span>1</span>
                    <span>Renseignez et envoyez-nous le formulaire ci-avant</span>
                </div>


                <div class="process">
                    <span>2</span>
                    <span>Nous revenons vers vous en vous indiquant les prix et possibilités qui s'offrent à vous</span>
                </div>

                <div class="process">
                    <span>3</span>
                    <span>Vous nous indiquez votre choix parmis ceux proposés</span>
                </div>

                <div class="process">
                    <span>4</span>
                    <span>Nous convenons du prix et rendez-vous le jour j pour profiter de votre véhicule</span>
                </div>
            </div>
        </div>

    </div>

        <p-toast [breakpoints]="{'920px': {width: '100%', right: '0', left: '0', backgroung:'red'}}"></p-toast>

</div>