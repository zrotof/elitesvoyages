<div class="app">

    <div class="hero">
        <div class="hero-content my-container">
            <h1 class="title">Appartements meublés</h1>
        </div>
    </div>

    <div class="content my-container">

        <div class="intro">
            <span class="form-invit">Indiquez-nous les informations relatives à votre recherche via le formulaire ci-après.</span>
            <span class="form-advices">Les champs marqués d'un <span class="red-star">*</span> sont obligatoires</span>
        </div>

        <form [formGroup]="apartForm" (ngSubmit)="onSubmitApartForm()">


            <div class="room-town-date">

            <div class="element">
                <div class="room">

                    <div class="label">
                        <span>Type</span>
                        <span class="red-star">*</span>
                    </div>
                    <select class="custom-select" formControlName="type" >
                        <option [ngValue]="null" disabled></option>
                        <option *ngFor="let room of rooms" [ngValue]="room">{{room}}</option>
                    </select>
                    
                </div>

                <div *ngIf="isApartFormSubmitted && f.type.errors" class="error-feedback">
                    <small *ngIf="f.type.errors.required">Type de pièce</small>
                </div>
            </div>

            <div class="element">
                    <div class="date">
                        <div class="label">
                            <span>Jour d'arrivée </span>
                            <span class="red-star">*</span>
                        </div>
                        <p-calendar dateFormat="dd-mm-yy" inputId="dateformat" [minDate]="minDate" [readonlyInput]="true" placeholder="Jour début" formControlName="dateDeb"></p-calendar>
                    </div>
                    <div *ngIf="isApartFormSubmitted && f.dateDeb.errors" class="error-feedback">
                        <small *ngIf="f.dateDeb.errors.required">Renseignez la date</small>
                    </div>
            </div>

            <div class="element">
                    <div class="date">
                        <div class="label">
                            <span>Jour de départ </span>
                            <span class="red-star">*</span>
                        </div>
                        <p-calendar dateFormat="dd-mm-yy" inputId="dateformat" [minDate]="minDate" [readonlyInput]="true" placeholder="Jour début" formControlName="dateFin"></p-calendar>
                    </div>
                    <div *ngIf="isApartFormSubmitted && f.dateFin.errors" class="error-feedback">
                        <small *ngIf="f.dateFin.errors.required">Renseignez la date</small>
                    </div>
            </div>
                
            <div class="element">
                <div class="town">
                    <div class="label">
                        <span>Ville </span>
                        <span class="red-star">*</span>
                    </div>
                    <input type="text" formControlName="town">
                </div>

                <div *ngIf="isApartFormSubmitted && f.town.errors" class="error-feedback">
                    <small *ngIf="f.town.errors.required">Renseignez la ville</small>
                </div>
            </div>
                
            </div>

            <div class="extras-bloc">
                <span>Extras</span>

                <div class="extras">
                    <ng-template ngFor let-extra [ngForOf]="extras">
                        <div class="extra">
                            <input type="checkbox" id="{{extra.id}}" (change)="onChangeApartExtras(extra.name, $event)">
                            <label for="{{extra.id}}">{{extra.name}}</label>
                        </div>
                    </ng-template>
                 
                </div>
                
            </div>

            <div class="gender-names">

                <div class="element">
                    <div class="gender">
        
                        <div class="label">
                            <span>Civilités</span>
                            <span class="red-star">*</span>
                        </div>
                        <select class="custom-select" formControlName="civility">
                            <option [ngValue]="null" disabled></option>
                            <option *ngFor="let civility of civilities" [ngValue]="civility">{{civility}}</option>
                        </select>
                        
                    </div>
        
                    <div *ngIf="isApartFormSubmitted && f.civility.errors" class="error-feedback">
                      <small *ngIf="f.civility.errors.required">Renseignez</small>
                    </div>
                </div>
        
                  <div class="element">
                    <div class="lastname">
                      <div class="label">
                          <span>Nom(s) </span>
                          <span class="red-star">*</span>
                      </div>
                      <input type="text" placeholder="Entrez votre nom" formControlName="lastname">
                    </div>
                    <div *ngIf="isApartFormSubmitted && f.lastname.errors" class="error-feedback">
                        <small *ngIf="f.lastname.errors.required">Renseignez votre nom</small>
                    </div>
                  </div>
                 
                  
                <div class="element">
        
                  <div class="firstname">
                      <div class="label">
                          <span>Prénom(s) </span>
                          <span class="red-star">*</span>
                      </div>
                      <input type="text" placeholder="Entrez votre prénom" formControlName="firstname">
                  </div>
                  <div *ngIf="isApartFormSubmitted && f.firstname.errors" class="error-feedback">
                    <small *ngIf="f.firstname.errors.required">Renseignez votre prénom</small>
                  </div>
                </div>
            
            </div>

            <div class="email-phone">
                
                <div class="element">
                    <div class="email">
                        <div class="label">
                            <span>Email </span>
                            <span class="red-star">*</span>
                        </div>
                        <input type="email" placeholder="Email" formControlName="email">
                    </div>

                    <div *ngIf="isApartFormSubmitted && f.email.errors" class="error-feedback">
                        <small *ngIf="f.email.errors.required">Renseignez votre email</small>
                    </div>
                </div>
                
                <div class="element">
                    <div class="phone">
                        <div class="label">
                            <span>Téléphone </span>
                        </div>
                        <input type="text" placeholder="Téléphone" formControlName="phone">
                    </div>
                </div>
                
            </div>

            <button type="submit">
                <ng-container *ngIf="isApartFormSubmittedAndNotErrorOnClientSide; else defaultText">
                    <p-progressSpinner [style]="{width: '20px', height: '20px'}" strokeWidth="8"></p-progressSpinner>
                </ng-container>
            </button>

        </form>

        <ng-template #defaultText>Réserver</ng-template>


        <div class="procedure">
            <h1>Comment ça marche ?</h1>

            <div class="process-bloc">
                <div class="process">
                    <span>1</span>
                    <span>Renseignez et envoyez-nous le formulaire ci-avant</span>
                </div>


                <div class="process">
                    <span>2</span>
                    <span>Nous revenons vers vous en vous indiquant les prix et possibilités qui s'offrent à vous</span>
                </div>

                <div class="process">
                    <span>3</span>
                    <span>Vous nous indiquez votre choix parmis ceux proposés</span>
                </div>

                <div class="process">
                    <span>4</span>
                    <span>Nous convenons du prix et rendez-vous le jour j pour profiter de votre véhicule</span>
                </div>
            </div>
        </div>
        


    </div>

    <p-toast [breakpoints]="{'920px': {width: '100%', right: '0', left: '0', backgroung:'red'}}"></p-toast>

</div>